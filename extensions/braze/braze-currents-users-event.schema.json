{
  "meta:license": [
    "Copyright 2020 Adobe Systems Incorporated. All rights reserved.",
    "This work is licensed under a Creative Commons Attribution 4.0 International (CC BY 4.0) license",
    "you may not use this file except in compliance with the License. You may obtain a copy",
    "of the License at https://creativecommons.org/licenses/by/4.0/"
  ],
  "$id": "https://ns.braze.com/currents/users-event",
  "$schema": "http://json-schema.org/draft-06/schema#",
  "title": "Braze Currents Users Event",
  "description": "Braze Currents users event payload",
  "type": "object",
  "meta:extensible": true,
  "meta:intendedToExtend": [
    "https://ns.adobe.com/xdm/context/experienceevent"
  ],
  "definitions": {
    "currents-users-event": {
      "properties": {
        "braze:appId": {
          "title": "App ID",
          "type": "string",
          "description": "API ID of the app this action occurred on"
        },
        "braze:timezone": {
          "title": "Timezone",
          "type": "string",
          "description": "timezone of the user"
        },
        "braze:user": {
          "title": "User",
          "type": "object",
          "properties": {
            "braze:userId": {
              "title": "User ID",
              "type": "string",
              "description": "BSON id of the user that performed the event",
              "isRequired": true
            },
            "braze:externalUserId": {
              "title": "External User ID",
              "type": "string",
              "description": "external user id of the user"
            },
            "braze:emailAddress": {
              "title": "Email Address",
              "type": "string",
              "description": "email address of the user"
            }
          },
          "required": [
            "braze:userId"
          ]
        },
        "braze:device": {
          "title": "Device",
          "type": "object",
          "properties": {
            "braze:platform": {
              "title": "Platform",
              "type": "string",
              "description": "platform of the device"
            },
            "braze:osVersion": {
              "title": "OS Version",
              "type": "string",
              "description": "version of the operating system of the device"
            },
            "braze:deviceModel": {
              "title": "Device Model",
              "type": "string",
              "description": "model of the device"
            },
            "braze:deviceId": {
              "title": "Device ID",
              "type": "string",
              "description": "id of the device on which the custom event occurred"
            }
          }
        },
        "braze:customEvent": {
          "title": "Custom Event",
          "type": "object",
          "properties": {
            "braze:name": {
              "title": "Name",
              "type": "string",
              "description": "name of the custom event"
            },
            "braze:properties": {
              "title": "Properties",
              "type": "string",
              "description": "custom properties of the event stored as a JSON encoded string"
            }
          }
        },
        "braze:campaign": {
          "title": "Campaign",
          "type": "object",
          "properties": {
            "braze:campaignId": {
              "title": "Campaign ID",
              "type": "string",
              "description": "API ID of the campaign this email belongs to"
            },
            "braze:campaignName": {
              "title": "Campaign Name",
              "type": "string",
              "description": "name of the campaign"
            },
            "braze:messageVariationId": {
              "title": "Message Variation ID",
              "type": "string",
              "description": "API ID of the message variation this user received"
            },
            "braze:messageVariationName": {
              "title": "Message Variation Name",
              "type": "string",
              "description": "name of the message variation"
            }
          }
        },
        "braze:canvas": {
          "title": "Canvas",
          "type": "object",
          "properties": {
            "braze:canvasId": {
              "title": "Canvas ID",
              "type": "string",
              "description": "API ID of the canvas this email belongs to"
            },
            "braze:canvasName": {
              "title": "Canvas Name",
              "type": "string",
              "description": "name of the canvas"
            },
            "braze:canvasVariationId": {
              "title": "Canvas Variation ID",
              "type": "string",
              "description": "API ID of the canvas variation this user received"
            },
            "braze:canvasVariationName": {
              "title": "Canvas Variation Name",
              "type": "string",
              "description": "Name of the canvas variation this user received"
            },
            "braze:canvasStepId": {
              "title": "Canvas Step ID",
              "type": "string",
              "description": "API ID of the canvas step this email belongs to"
            },
            "braze:canvasStepName": {
              "title": "Canvas Step Name",
              "type": "string",
              "description": "Name of the canvas step"
            }
          }
        },
        "braze:messaging": {
          "title": "Messaging",
          "type": "object",
          "properties": {
            "braze:dispatchId": {
              "title": "Dispatch ID",
              "type": "string",
              "description": "ID of the dispatch this message belongs to"
            },
            "braze:sendId": {
              "title": "Send ID",
              "type": "string",
              "description": "message send ID this message belongs to"
            },
            "braze:email": {
              "title": "Email",
              "type": "object",
              "properties": {
                "braze:sendingIp": {
                  "title": "Sending IP",
                  "type": "string",
                  "description": "IP address from which the email send was made"
                },
                "braze:ipPool": {
                  "title": "IP Pool",
                  "type": "string",
                  "description": "IP Pool from which the email send was made"
                },
                "braze:esp": {
                  "title": "ESP",
                  "type": "string",
                  "description": "ESP related to the event (Sparkpost or Sendgrid)",
                  "enum": [
                    "SparkPost",
                    "SendGrid"
                  ],
                  "meta:enum": {
                    "SparkPost": "SparkPost",
                    "SendGrid": "SendGrid"
                  }
                },
                "braze:fromDomain": {
                  "title": "From Domain",
                  "type": "string",
                  "description": "sending domain for the email"
                },
                "braze:userAgent": {
                  "title": "User Agent",
                  "type": "string",
                  "description": "user agent on which the click occurred"
                },
                "braze:machineOpen": {
                  "title": "Machine Open",
                  "type": "string",
                  "description": "Populated to 'true' if the open event is triggered without user engagement, e.g. by an Apple device with Mail Privacy Protection enabled. Value may change over time to provide more granularity.",
                  "enum": [
                    "true"
                  ],
                  "meta:enum": {
                    "true": "true"
                  }
                },
                "braze:isAmp": {
                  "title": "Is AMP",
                  "type": "boolean",
                  "description": "indicates that this is an AMP event"
                },
                "braze:url": {
                  "title": "URL",
                  "type": "string",
                  "description": "URL that the user clicked on"
                },
                "braze:linkId": {
                  "title": "Link ID",
                  "type": "string",
                  "description": "unique ID for the link which was clicked, as created by Braze"
                },
                "braze:linkAlias": {
                  "title": "Link Alias",
                  "type": "string",
                  "description": "alias associated with this link ID"
                },
                "braze:bounceReason": {
                  "title": "Bounce Reason",
                  "type": "string",
                  "description": "The SMTP reason code and user friendly message received for this bounce event"
                },
                "braze:isDrop": {
                  "title": "Is Drop",
                  "type": "boolean",
                  "description": "indicates that this event counts as a drop event"
                }
              }
            }
          }
        },
        "braze:adTracking": {
          "title": "Ad Tracking",
          "type": "object",
          "properties": {
            "braze:adId": {
              "title": "Ad ID",
              "type": "string",
              "description": "Advertising identifier"
            },
            "braze:adIdType": {
              "title": "Ad ID Type",
              "type": "string",
              "description": "One of 'ios_idfa', 'google_ad_id', 'windows_ad_id', OR 'roku_ad_id'",
              "enum": [
                "ios_idfa",
                "google_ad_id",
                "windows_ad_id",
                "roku_ad_id"
              ],
              "meta:enum": {
                "ios_idfa": "iOS ID for advertisers",
                "google_ad_id": "Google Ad ID",
                "windows_ad_id": "Windows Advertiser ID",
                "roku_ad_id": "Roku Ad ID"
              }
            },
            "braze:adTrackingEnabled": {
              "title": "Ad Tracking Enabled",
              "type": "boolean",
              "description": "Whether advertising tracking is enabled for the device"
            }
          }
        }
      }
    }
  },
  "allOf": [
    {
      "$ref": "#/definitions/currents-users-event"
    }
  ],
  "required": [
    "@id",
    "timestamp"
  ],
  "meta:status": "experimental"
}
