{
  "meta:license": [
    "Copyright 2020 Adobe Systems Incorporated. All rights reserved.",
    "This work is licensed under a Creative Commons Attribution 4.0 International (CC BY 4.0) license",
    "you may not use this file except in compliance with the License. You may obtain a copy",
    "of the License at https://creativecommons.org/licenses/by/4.0/"
  ],
  "$id": "https://ns.braze.com/currents/users-event",
  "$schema": "http://json-schema.org/draft-06/schema#",
  "title": "Braze Currents Users Event",
  "description": "Braze Currents users event payload",
  "type": "object",
  "meta:extensible": true,
  "meta:intendedToExtend": [
    "https://ns.adobe.com/xdm/context/experienceevent"
  ],
  "definitions": {
    "currents-users-event": {
      "properties": {
        "braze:id": {
          "title": "id",
          "type": "string",
          "description": "globally unique id for this event",
          "isRequired": true
        },
        "braze:appId": {
          "title": "app_id",
          "type": "string",
          "description": "API ID of the app this action occurred on",
          "isRequired": false
        },
        "braze:time": {
          "title": "time",
          "type": "integer",
          "description": "unix timestamp at which the user performed the event",
          "isRequired": true
        },
        "braze:timezone": {
          "title": "timezone",
          "type": "string",
          "description": "timezone of the user",
          "isRequired": false
        },
        "braze:user": {
          "title": "User",
          "type": "object",
          "properties": {
            "braze:userId": {
              "title": "user_id",
              "type": "string",
              "description": "BSON id of the user that performed the event",
              "isRequired": true
            },
            "braze:externalUserId": {
              "title": "external_user_id",
              "type": "string",
              "description": "external user id of the user",
              "isRequired": false
            },
            "braze:emailAddress": {
              "title": "email_address",
              "type": "string",
              "description": "email address of the user",
              "isRequired": false
            }
          }
        },
        "braze:device": {
          "title": "Device",
          "type": "object",
          "properties": {
            "braze:platform": {
              "title": "platform",
              "type": "string",
              "description": "platform of the device",
              "isRequired": false
            },
            "braze:osVersion": {
              "title": "os_version",
              "type": "string",
              "description": "version of the operating system of the device",
              "isRequired": false
            },
            "braze:deviceModel": {
              "title": "device_model",
              "type": "string",
              "description": "model of the device",
              "isRequired": false
            },
            "braze:deviceId": {
              "title": "device_id",
              "type": "string",
              "description": "id of the device on which the custom event occurred",
              "isRequired": false
            }
          }
        },
        "braze:customEvent": {
          "title": "Custom Event",
          "type": "object",
          "properties": {
            "braze:name": {
              "title": "name",
              "type": "string",
              "description": "name of the custom event",
              "isRequired": false
            },
            "braze:properties": {
              "title": "properties",
              "type": "string",
              "description": "custom properties of the event stored as a JSON encoded string",
              "isRequired": false
            }
          }
        },
        "braze:campaign": {
          "title": "Campaign",
          "type": "object",
          "properties": {
            "braze:campaignId": {
              "title": "campaign_id",
              "type": "string",
              "description": "API ID of the campaign this email belongs to",
              "isRequired": false
            },
            "braze:campaignName": {
              "title": "campaign_name",
              "type": "string",
              "description": "name of the campaign",
              "isRequired": false
            },
            "braze:messageVariationId": {
              "title": "message_variation_id",
              "type": "string",
              "description": "API ID of the message variation this user received",
              "isRequired": false
            },
            "braze:messageVariationName": {
              "title": "message_variation_name",
              "type": "string",
              "description": "name of the message variation",
              "isRequired": false
            }
          }
        },
        "braze:canvas": {
          "title": "Canvas",
          "type": "object",
          "properties": {
            "braze:canvasId": {
              "title": "canvas_id",
              "type": "string",
              "description": "API ID of the canvas this email belongs to",
              "isRequired": false
            },
            "braze:canvasName": {
              "title": "canvas_name",
              "type": "string",
              "description": "name of the canvas",
              "isRequired": false
            },
            "braze:canvasVariationId": {
              "title": "canvas_variation_id",
              "type": "string",
              "description": "API ID of the canvas variation this user received",
              "isRequired": false
            },
            "braze:canvasVariationName": {
              "title": "canvas_variation_name",
              "type": "string",
              "description": "Name of the canvas variation this user received",
              "isRequired": false
            },
            "braze:canvasStepId": {
              "title": "canvas_step_id",
              "type": "string",
              "description": "API ID of the canvas step this email belongs to",
              "isRequired": false
            },
            "braze:canvasStepName": {
              "title": "canvas_step_name",
              "type": "string",
              "description": "Name of the canvas step",
              "isRequired": false
            }
          }
        },
        "braze:messaging": {
          "title": "Messaging",
          "type": "object",
          "properties": {
            "braze:dispatchId": {
              "title": "dispatch_id",
              "type": "string",
              "description": "ID of the dispatch this message belongs to",
              "isRequired": false
            },
            "braze:sendId": {
              "title": "send_id",
              "type": "string",
              "description": "message send ID this message belongs to",
              "isRequired": false
            },
            "braze:email": {
              "title": "Email",
              "type": "object",
              "properties": {
                "braze:sendingIp": {
                  "title": "sending_ip",
                  "type": "string",
                  "description": "IP address from which the email send was made",
                  "isRequired": false
                },
                "braze:ipPool": {
                  "title": "ip_pool",
                  "type": "string",
                  "description": "IP Pool from which the email send was made",
                  "isRequired": false
                },
                "braze:esp": {
                  "title": "esp",
                  "type": "string",
                  "description": "ESP related to the event (Sparkpost or Sendgrid)",
                  "isRequired": false,
                  "enum": [
                    "SparkPost",
                    "SendGrid"
                  ]
                },
                "braze:fromDomain": {
                  "title": "from_domain",
                  "type": "string",
                  "description": "sending domain for the email",
                  "isRequired": false
                },
                "braze:userAgent": {
                  "title": "user_agent",
                  "type": "string",
                  "description": "user agent on which the click occurred",
                  "isRequired": false
                },
                "braze:machineOpen": {
                  "title": "machine_open",
                  "type": "string",
                  "description": "Populated to 'true' if the open event is triggered without user engagement, e.g. by an Apple device with Mail Privacy Protection enabled. Value may change over time to provide more granularity.",
                  "isRequired": false,
                  "enum": [
                    "true"
                  ]
                },
                "braze:isAmp": {
                  "title": "is_amp",
                  "type": "boolean",
                  "description": "indicates that this is an AMP event",
                  "isRequired": false
                },
                "braze:url": {
                  "title": "url",
                  "type": "string",
                  "description": "URL that the user clicked on",
                  "isRequired": false
                },
                "braze:linkId": {
                  "title": "link_id",
                  "type": "string",
                  "description": "unique ID for the link which was clicked, as created by Braze",
                  "isRequired": false
                },
                "braze:linkAlias": {
                  "title": "link_alias",
                  "type": "string",
                  "description": "alias associated with this link ID",
                  "isRequired": false
                },
                "braze:bounceReason": {
                  "title": "bounce_reason",
                  "type": "string",
                  "description": "The SMTP reason code and user friendly message received for this bounce event",
                  "isRequired": false
                },
                "braze:isDrop": {
                  "title": "is_drop",
                  "type": "boolean",
                  "description": "indicates that this event counts as a drop event",
                  "isRequired": false
                }
              }
            }
          }
        },
        "braze:adTracking": {
          "title": "Ad Tracking",
          "type": "object",
          "properties": {
            "braze:adId": {
              "title": "ad_id",
              "type": "string",
              "description": "Advertising identifier",
              "isRequired": false
            },
            "braze:adIdType": {
              "title": "ad_id_type",
              "type": "string",
              "description": "One of 'ios_idfa', 'google_ad_id', 'windows_ad_id', OR 'roku_ad_id'",
              "isRequired": false,
              "enum": [
                "ios_idfa",
                "google_ad_id",
                "windows_ad_id",
                "roku_ad_id"
              ]
            },
            "braze:adTrackingEnabled": {
              "title": "ad_tracking_enabled",
              "type": "boolean",
              "description": "Whether advertising tracking is enabled for the device",
              "isRequired": false
            }
          }
        }
      }
    }
  },
  "allOf": [
    {
      "$ref": "#/definitions/currents-users-event"
    }
  ],
  "meta:status": "experimental"
}
